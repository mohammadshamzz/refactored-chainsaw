2025-09-09 18:31:09,640 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:31:09,640 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:31:09,641 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:31:09,641 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:32:46,402 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:32:46,402 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:32:46,402 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:32:46,403 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:32:52,008 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:32:52,008 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:32:52,008 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:32:52,009 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:33:09,656 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:33:09,656 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:33:09,656 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:33:09,657 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:33:10,515 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:33:10,516 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:33:10,516 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:33:10,516 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:33:29,686 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:33:29,687 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:33:29,687 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:33:29,687 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:33:30,471 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:33:30,471 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:33:30,471 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:33:30,472 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:36:18,439 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:36:18,440 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:36:18,440 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:36:18,440 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:49:46,308 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:49:46,309 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:49:46,309 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:49:46,309 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:49:46,643 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:49:46,643 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:49:46,643 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:49:46,643 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:50:13,735 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:50:13,735 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:50:13,735 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:50:13,735 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:50:14,038 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:50:14,038 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:50:14,038 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:50:14,038 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:50:16,435 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:50:16,435 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:50:16,435 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:50:16,435 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:50:16,732 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:50:16,733 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:50:16,733 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:50:16,733 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:52:26,477 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:52:26,478 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:52:26,478 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:52:26,478 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:52:26,774 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:52:26,774 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:52:26,774 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:52:26,774 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:52:27,276 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': None, 'user': None, 'host': None, 'port': None}
2025-09-09 18:52:29,301 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': None, 'user': None, 'host': None, 'port': None}
2025-09-09 18:52:31,329 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': None, 'user': None, 'host': None, 'port': None}
2025-09-09 18:52:32,233 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:52:32,234 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:52:32,234 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:52:32,234 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:52:32,526 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:52:32,526 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:52:32,527 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:52:32,527 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:52:33,004 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': None, 'user': None, 'host': None, 'port': None}
2025-09-09 18:52:35,030 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': None, 'user': None, 'host': None, 'port': None}
2025-09-09 18:52:37,051 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': None, 'user': None, 'host': None, 'port': None}
2025-09-09 18:53:09,364 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:53:09,365 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:53:09,365 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:53:09,365 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:53:09,379 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 18:53:09,380 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 18:53:09,609 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 18:53:09,610 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 18:53:09,664 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:53:09,664 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:53:09,665 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:53:09,665 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:53:10,126 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 18:53:34,301 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 18:53:34,301 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 18:53:34,301 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 18:53:34,302 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 18:53:34,302 - root - INFO - __init__:65 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 18:53:34,303 - root - INFO - run_async:124 - Trading Agent's async loop started.
2025-09-09 18:53:34,320 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 18:53:35,662 - root - INFO - validate_connection:381 - Account access OK. Equity: $97,993.06
2025-09-09 18:53:35,941 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 18:53:36,900 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 18:53:37,403 - root - INFO - _update_status:74 - Services connected. Account Equity: $97,987.30 | Market: OPEN
2025-09-09 18:53:37,403 - root - INFO - _connect_services:105 - Broker validation: Account=True, Trading=True, Data=True, Market Open=True
2025-09-09 18:53:37,644 - root - INFO - _reset_daily_pdt_counter:202 - New trading day: 2025-09-09. PDT counter reset to 0/4
2025-09-09 18:53:37,931 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:53:37,931 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $97987.30: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:53:38,165 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $0.00 | PDT: 0/4
2025-09-09 18:53:43,603 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $496.24: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 18:53:48,963 - root - INFO - _find_htf_setup_async:879 - [AAPL] NEW POI | Type=Bullish | Score=25 | Range=(232.48, 234.76) | SL=224.74
2025-09-09 18:53:48,963 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 1: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:53:48,977 - root - INFO - _find_htf_setup_async:899 - [AAPL] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:53:48,977 - root - INFO - add_notification:33 - Notification: Setup Found - AAPL buy setup added to watchlist
2025-09-09 18:53:55,872 - root - INFO - _find_htf_setup_async:879 - [ACN] NEW POI | Type=Bearish | Score=23 | Range=(254.40, 256.09) | SL=266.50
2025-09-09 18:53:55,873 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 2: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:53:55,874 - root - INFO - _find_htf_setup_async:899 - [ACN] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:53:55,874 - root - INFO - add_notification:33 - Notification: Setup Found - ACN sell setup added to watchlist
2025-09-09 18:53:58,988 - root - INFO - _find_htf_setup_async:879 - [ADI] NEW POI | Type=Bullish | Score=25 | Range=(240.60, 244.31) | SL=228.99
2025-09-09 18:53:58,988 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 3: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:53:58,989 - root - INFO - _find_htf_setup_async:899 - [ADI] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:53:58,989 - root - INFO - add_notification:33 - Notification: Setup Found - ADI buy setup added to watchlist
2025-09-09 18:54:15,448 - root - INFO - _find_htf_setup_async:879 - [AMZN] NEW POI | Type=Bearish | Score=25 | Range=(238.14, 239.57) | SL=248.78
2025-09-09 18:54:15,449 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 4: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:54:15,450 - root - INFO - _find_htf_setup_async:899 - [AMZN] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:54:15,450 - root - INFO - add_notification:33 - Notification: Setup Found - AMZN sell setup added to watchlist
2025-09-09 18:54:19,382 - root - INFO - _find_htf_setup_async:879 - [ANET] NEW POI | Type=Bullish | Score=25 | Range=(137.10, 138.19) | SL=129.34
2025-09-09 18:54:19,382 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 5: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:54:19,383 - root - INFO - _find_htf_setup_async:899 - [ANET] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:54:19,383 - root - INFO - add_notification:33 - Notification: Setup Found - ANET buy setup added to watchlist
2025-09-09 18:54:25,250 - root - INFO - _find_htf_setup_async:879 - [ASML] NEW POI | Type=Bearish | Score=23 | Range=(804.89, 808.01) | SL=841.11
2025-09-09 18:54:25,251 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 6: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:54:25,252 - root - INFO - _find_htf_setup_async:899 - [ASML] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:54:25,252 - root - INFO - add_notification:33 - Notification: Setup Found - ASML sell setup added to watchlist
2025-09-09 18:55:26,195 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:55:26,195 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $97987.30: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:55:26,428 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $40.32 | PDT: 0/4
2025-09-09 18:55:30,987 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $496.52: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 18:55:49,474 - root - INFO - _find_htf_setup_async:879 - [GOOG] NEW POI | Type=Bullish | Score=23 | Range=(232.77, 233.99) | SL=221.21
2025-09-09 18:55:49,474 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 7: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:55:49,475 - root - INFO - _find_htf_setup_async:899 - [GOOG] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:55:49,475 - root - INFO - add_notification:33 - Notification: Setup Found - GOOG buy setup added to watchlist
2025-09-09 18:55:54,354 - root - INFO - _find_htf_setup_async:879 - [GOOGL] NEW POI | Type=Bullish | Score=23 | Range=(232.36, 233.67) | SL=220.66
2025-09-09 18:55:54,354 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 8: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:55:54,356 - root - INFO - _find_htf_setup_async:899 - [GOOGL] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:55:54,356 - root - INFO - add_notification:33 - Notification: Setup Found - GOOGL buy setup added to watchlist
2025-09-09 18:56:06,526 - root - INFO - _find_htf_setup_async:879 - [INTU] NEW POI | Type=Bearish | Score=25 | Range=(672.20, 676.00) | SL=701.22
2025-09-09 18:56:06,526 - root - ERROR - _save_agent_state:349 - Error saving agent state - watchlist items: 9: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 346, in _save_agent_state
    await execute_db_query(self.db_pool, query, (json.dumps(state_data), datetime.now()))
                                                 ~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type datetime is not JSON serializable
2025-09-09 18:56:06,527 - root - INFO - _find_htf_setup_async:899 - [INTU] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:56:06,527 - root - INFO - add_notification:33 - Notification: Setup Found - INTU sell setup added to watchlist
2025-09-09 18:56:13,085 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:56:13,085 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:56:13,085 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:56:13,085 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:56:13,099 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 18:56:13,099 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 18:56:13,327 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 18:56:13,327 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 18:56:13,383 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:56:13,384 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:56:13,384 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:56:13,384 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:56:13,891 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 18:56:38,726 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 18:56:38,726 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 18:56:38,726 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 18:56:38,727 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 18:56:38,727 - root - INFO - __init__:65 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 18:56:38,728 - root - INFO - run_async:124 - Trading Agent's async loop started.
2025-09-09 18:56:38,731 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 18:56:39,617 - root - INFO - validate_connection:381 - Account access OK. Equity: $98,003.86
2025-09-09 18:56:39,847 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 18:56:40,765 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 18:56:41,255 - root - INFO - _update_status:74 - Services connected. Account Equity: $97,994.50 | Market: OPEN
2025-09-09 18:56:41,256 - root - INFO - _connect_services:105 - Broker validation: Account=True, Trading=True, Data=True, Market Open=True
2025-09-09 18:56:41,258 - root - ERROR - _load_agent_state:405 - Error loading agent state from database: the JSON object must be str, bytes or bytearray, not dict
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 381, in _load_agent_state
    state_data = json.loads(result['state_data'])
  File "C:\Python313\Lib\json\__init__.py", line 339, in loads
    raise TypeError(f'the JSON object must be str, bytes or bytearray, '
                    f'not {s.__class__.__name__}')
TypeError: the JSON object must be str, bytes or bytearray, not dict
2025-09-09 18:56:41,260 - root - INFO - _reset_daily_pdt_counter:202 - New trading day: 2025-09-09. PDT counter reset to 0/4
2025-09-09 18:56:41,501 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:56:41,501 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $0.00: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:56:41,736 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $97995.94 | PDT: 0/4
2025-09-09 18:56:47,011 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $496.30: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 18:56:52,354 - root - INFO - _find_htf_setup_async:879 - [AAPL] NEW POI | Type=Bullish | Score=25 | Range=(232.48, 234.76) | SL=224.74
2025-09-09 18:56:52,355 - root - INFO - _find_htf_setup_async:899 - [AAPL] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:56:52,356 - root - INFO - add_notification:33 - Notification: Setup Found - AAPL buy setup added to watchlist
2025-09-09 18:56:59,548 - root - INFO - _find_htf_setup_async:879 - [ACN] NEW POI | Type=Bearish | Score=23 | Range=(254.40, 256.09) | SL=266.50
2025-09-09 18:56:59,549 - root - INFO - _find_htf_setup_async:899 - [ACN] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:56:59,549 - root - INFO - add_notification:33 - Notification: Setup Found - ACN sell setup added to watchlist
2025-09-09 18:57:03,045 - root - INFO - _find_htf_setup_async:879 - [ADI] NEW POI | Type=Bullish | Score=25 | Range=(240.60, 244.31) | SL=228.99
2025-09-09 18:57:03,046 - root - INFO - _find_htf_setup_async:899 - [ADI] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:57:03,046 - root - INFO - add_notification:33 - Notification: Setup Found - ADI buy setup added to watchlist
2025-09-09 18:57:17,792 - root - INFO - _find_htf_setup_async:879 - [AMZN] NEW POI | Type=Bearish | Score=25 | Range=(238.14, 239.57) | SL=248.78
2025-09-09 18:57:17,793 - root - INFO - _find_htf_setup_async:899 - [AMZN] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:57:17,793 - root - INFO - add_notification:33 - Notification: Setup Found - AMZN sell setup added to watchlist
2025-09-09 18:57:22,042 - root - INFO - _find_htf_setup_async:879 - [ANET] NEW POI | Type=Bullish | Score=25 | Range=(137.10, 138.19) | SL=129.34
2025-09-09 18:57:22,043 - root - INFO - _find_htf_setup_async:899 - [ANET] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:57:22,043 - root - INFO - add_notification:33 - Notification: Setup Found - ANET buy setup added to watchlist
2025-09-09 18:57:28,163 - root - INFO - _find_htf_setup_async:879 - [ASML] NEW POI | Type=Bearish | Score=23 | Range=(804.89, 808.01) | SL=841.11
2025-09-09 18:57:28,163 - root - INFO - _find_htf_setup_async:899 - [ASML] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:57:28,164 - root - INFO - add_notification:33 - Notification: Setup Found - ASML sell setup added to watchlist
2025-09-09 18:58:29,088 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:58:29,089 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $0.00: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 18:58:29,322 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $97974.34 | PDT: 0/4
2025-09-09 18:58:34,004 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $496.15: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 18:58:52,405 - root - INFO - _find_htf_setup_async:879 - [GOOG] NEW POI | Type=Bullish | Score=23 | Range=(232.77, 233.99) | SL=221.19
2025-09-09 18:58:52,406 - root - INFO - _find_htf_setup_async:899 - [GOOG] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:58:52,407 - root - INFO - add_notification:33 - Notification: Setup Found - GOOG buy setup added to watchlist
2025-09-09 18:58:57,351 - root - INFO - _find_htf_setup_async:879 - [GOOGL] NEW POI | Type=Bullish | Score=23 | Range=(232.36, 233.67) | SL=220.64
2025-09-09 18:58:57,352 - root - INFO - _find_htf_setup_async:899 - [GOOGL] New HTF setup added to watchlist. Direction: buy.
2025-09-09 18:58:57,352 - root - INFO - add_notification:33 - Notification: Setup Found - GOOGL buy setup added to watchlist
2025-09-09 18:59:10,631 - root - INFO - _find_htf_setup_async:879 - [INTU] NEW POI | Type=Bearish | Score=25 | Range=(672.20, 676.00) | SL=701.22
2025-09-09 18:59:10,632 - root - INFO - _find_htf_setup_async:899 - [INTU] New HTF setup added to watchlist. Direction: sell.
2025-09-09 18:59:10,633 - root - INFO - add_notification:33 - Notification: Setup Found - INTU sell setup added to watchlist
2025-09-09 18:59:57,857 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:59:57,858 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:59:57,858 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:59:57,858 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:59:57,871 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 18:59:57,871 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 18:59:58,105 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 18:59:58,106 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 18:59:58,161 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 18:59:58,161 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 18:59:58,161 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 18:59:58,161 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 18:59:58,678 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:00:00,067 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:00:00,068 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:00:00,068 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:00:00,068 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:00:00,080 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:00:00,081 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:00:00,315 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:00:00,315 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:00:00,372 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:00:00,373 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:00:00,373 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:00:00,373 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:00:00,859 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:00:10,776 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 19:00:10,776 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 19:00:10,777 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 19:00:10,777 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 19:00:10,777 - root - INFO - __init__:65 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 19:00:10,779 - root - INFO - run_async:124 - Trading Agent's async loop started.
2025-09-09 19:00:10,780 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 19:00:11,683 - root - INFO - validate_connection:381 - Account access OK. Equity: $97,995.94
2025-09-09 19:00:11,910 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 19:00:12,827 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 19:00:13,290 - root - INFO - _update_status:74 - Services connected. Account Equity: $97,995.94 | Market: OPEN
2025-09-09 19:00:13,290 - root - INFO - _connect_services:105 - Broker validation: Account=True, Trading=True, Data=True, Market Open=True
2025-09-09 19:00:13,293 - root - INFO - _load_agent_state:396 - Loaded agent state: 9 watchlist items, PDT: 0/4
2025-09-09 19:00:13,527 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 19:00:13,527 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $0.00: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 19:00:13,758 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $98004.58 | PDT: 0/4
2025-09-09 19:00:19,483 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $496.28: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 19:00:27,346 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for AAPL: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:00:38,248 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ACN: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:00:42,395 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ADI: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:01:00,512 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for AMZN: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:01:07,611 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ANET: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:01:15,848 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ASML: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:02:16,779 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 19:02:16,780 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $0.00: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 19:02:17,013 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $97928.63 | PDT: 0/4
2025-09-09 19:02:21,540 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $495.75: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 19:02:26,807 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:02:26,807 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:02:26,807 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:02:26,807 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:02:26,821 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:02:26,821 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:02:27,051 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:02:27,052 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:02:27,105 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:02:27,105 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:02:27,105 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:02:27,106 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:02:27,611 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:02:28,547 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:02:28,548 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:02:28,548 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:02:28,548 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:02:28,562 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:02:28,562 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:02:28,788 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:02:28,789 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:02:28,848 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:02:28,849 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:02:28,849 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:02:28,849 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:02:29,363 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:02:35,412 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 19:02:35,412 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 19:02:35,412 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 19:02:35,412 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 19:02:35,412 - root - INFO - __init__:65 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 19:02:35,413 - root - INFO - run_async:124 - Trading Agent's async loop started.
2025-09-09 19:02:35,415 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 19:02:36,290 - root - INFO - validate_connection:381 - Account access OK. Equity: $97,944.10
2025-09-09 19:02:36,523 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 19:02:37,413 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 19:02:37,875 - root - INFO - _update_status:74 - Services connected. Account Equity: $97,944.10 | Market: OPEN
2025-09-09 19:02:37,875 - root - INFO - _connect_services:105 - Broker validation: Account=True, Trading=True, Data=True, Market Open=True
2025-09-09 19:02:37,877 - root - INFO - _load_agent_state:396 - Loaded agent state: 9 watchlist items, PDT: 0/4
2025-09-09 19:02:38,107 - root - ERROR - execute_db_query:48 - Database query failed: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 19:02:38,108 - root - ERROR - _update_daily_equity_tracking:440 - Error updating daily equity tracking - start equity: $0.00: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 421, in _update_daily_equity_tracking
    result = await execute_db_query(self.db_pool, query, (today,), fetch='one')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\database.py", line 37, in execute_db_query
    cur.execute(query, params or ())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\.venv\Lib\site-packages\psycopg2\extras.py", line 146, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "daily_equity_tracking" does not exist
LINE 2: ...           SELECT equity_start, date_tracked FROM daily_equi...
                                                             ^

2025-09-09 19:02:38,340 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $97944.10 | PDT: 0/4
2025-09-09 19:02:43,452 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $495.86: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 19:02:48,999 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for AAPL: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:02:55,751 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ACN: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:02:59,026 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ADI: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:03:15,160 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for AMZN: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:03:19,289 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ANET: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:03:25,124 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ASML: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:04:09,178 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:04:09,179 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:04:09,179 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:04:09,179 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:04:09,191 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:04:09,192 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:04:09,419 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:04:09,420 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:04:09,474 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:04:09,475 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:04:09,475 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:04:09,475 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:04:09,941 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:04:10,897 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:04:10,898 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:04:10,899 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:04:10,899 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:04:10,913 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:04:10,913 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:04:11,139 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:04:11,139 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:04:11,191 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:04:11,192 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:04:11,192 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:04:11,192 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:04:11,655 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:04:19,390 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 19:04:19,390 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 19:04:19,390 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 19:04:19,391 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 19:04:19,391 - root - INFO - __init__:65 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 19:04:19,392 - root - INFO - run_async:124 - Trading Agent's async loop started.
2025-09-09 19:04:19,393 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 19:04:20,265 - root - INFO - validate_connection:381 - Account access OK. Equity: $97,925.38
2025-09-09 19:04:20,496 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 19:04:21,390 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 19:04:21,850 - root - INFO - _update_status:74 - Services connected. Account Equity: $97,925.38 | Market: OPEN
2025-09-09 19:04:21,851 - root - INFO - _connect_services:105 - Broker validation: Account=True, Trading=True, Data=True, Market Open=True
2025-09-09 19:04:21,853 - root - INFO - _load_agent_state:396 - Loaded agent state: 9 watchlist items, PDT: 0/4
2025-09-09 19:04:22,318 - root - INFO - _update_daily_equity_tracking:435 - New trading day started. Starting equity: $97925.38
2025-09-09 19:04:22,547 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $0.00 | PDT: 0/4
2025-09-09 19:04:27,830 - root - ERROR - _update_trailing_stop:326 - Error updating trailing stop for MSFT - side: buy, new_stop: $495.73: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 308, in _update_trailing_stop
    orders = await self.broker.get_orders(symbol=symbol, status='open')
                   ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AlpacaBroker.get_orders() got an unexpected keyword argument 'symbol'
2025-09-09 19:04:33,172 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for AAPL: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:04:39,890 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ACN: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:04:43,240 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ADI: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:04:57,237 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for AMZN: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:05:01,075 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ANET: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:05:07,959 - root - ERROR - _collect_and_rank_trade_candidates:530 - Error collecting trade candidate for ASML: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
Traceback (most recent call last):
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 518, in _collect_and_rank_trade_candidates
    trade_signal = await self._analyze_symbol_for_signal(symbol, market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 744, in _analyze_symbol_for_signal
    return self._check_ltf_confirmation_enhanced(symbol, htf_data, ltf_data, self.watchlist[symbol])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\workspace\fast_api_trading_platform\app\agent\agent.py", line 931, in _check_ltf_confirmation_enhanced
    if (datetime.now(timezone.utc) - setup_info['timestamp']).total_seconds() > setup_info['max_duration_seconds']:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'str'
2025-09-09 19:05:17,134 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:05:17,134 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:05:17,134 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:05:17,134 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:05:17,148 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:05:17,149 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:05:17,379 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:05:17,379 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:05:17,433 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:05:17,433 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:05:17,433 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:05:17,433 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:05:17,983 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:05:34,664 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:05:34,664 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:05:34,664 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:05:34,664 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:05:34,678 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:05:34,678 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:05:34,912 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 19:05:34,913 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 19:05:34,970 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 19:05:34,970 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 19:05:34,971 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 19:05:34,971 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 19:05:35,463 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 19:05:37,940 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 19:05:37,940 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 19:05:37,940 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 19:05:37,941 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 19:05:37,941 - root - INFO - __init__:65 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 19:05:37,942 - root - INFO - run_async:124 - Trading Agent's async loop started.
2025-09-09 19:05:37,943 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 19:05:38,825 - root - INFO - validate_connection:381 - Account access OK. Equity: $97,946.98
2025-09-09 19:05:39,057 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 19:05:39,956 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 19:05:40,420 - root - INFO - _update_status:74 - Services connected. Account Equity: $97,946.98 | Market: OPEN
2025-09-09 19:05:40,420 - root - INFO - _connect_services:105 - Broker validation: Account=True, Trading=True, Data=True, Market Open=True
2025-09-09 19:05:40,422 - root - INFO - _load_agent_state:396 - Loaded agent state: 9 watchlist items, PDT: 0/4
2025-09-09 19:05:40,884 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $15.84 | PDT: 0/4
2025-09-09 19:06:34,577 - root - INFO - __init__:23 - LLM Market Analyzer initialized with Gemini.
2025-09-09 19:06:35,974 - root - INFO - __init__:23 - LLM Market Analyzer initialized with Gemini.
2025-09-09 19:07:29,236 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-10.80 | PDT: 0/4
2025-09-09 19:09:16,179 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $45.36 | PDT: 0/4
2025-09-09 19:09:40,077 - root - INFO - _find_htf_setup_async:879 - [NOW] NEW POI | Type=Bullish | Score=25 | Range=(909.62, 932.59) | SL=862.01
2025-09-09 19:09:40,079 - root - INFO - _find_htf_setup_async:899 - [NOW] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:09:40,079 - root - INFO - add_notification:33 - Notification: Setup Found - NOW buy setup added to watchlist
2025-09-09 19:09:45,130 - root - INFO - _find_htf_setup_async:879 - [NVDA] NEW POI | Type=Bearish | Score=25 | Range=(172.50, 173.83) | SL=184.08
2025-09-09 19:09:45,131 - root - INFO - _find_htf_setup_async:899 - [NVDA] New HTF setup added to watchlist. Direction: sell.
2025-09-09 19:09:45,131 - root - INFO - add_notification:33 - Notification: Setup Found - NVDA sell setup added to watchlist
2025-09-09 19:09:49,447 - root - INFO - _find_htf_setup_async:879 - [ORCL] NEW POI | Type=Bearish | Score=23 | Range=(242.21, 245.00) | SL=258.40
2025-09-09 19:09:49,448 - root - INFO - _find_htf_setup_async:899 - [ORCL] New HTF setup added to watchlist. Direction: sell.
2025-09-09 19:09:49,448 - root - INFO - add_notification:33 - Notification: Setup Found - ORCL sell setup added to watchlist
2025-09-09 19:09:58,185 - root - INFO - _find_htf_setup_async:879 - [PLTR] NEW POI | Type=Bearish | Score=18 | Range=(172.29, 173.41) | SL=187.69
2025-09-09 19:09:58,186 - root - INFO - _find_htf_setup_async:899 - [PLTR] New HTF setup added to watchlist. Direction: sell.
2025-09-09 19:09:58,187 - root - INFO - add_notification:33 - Notification: Setup Found - PLTR sell setup added to watchlist
2025-09-09 19:11:03,804 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $46.08 | PDT: 0/4
2025-09-09 19:11:10,780 - root - INFO - _find_htf_setup_async:879 - [SAP] NEW POI | Type=Bearish | Score=23 | Range=(271.41, 273.69) | SL=281.36
2025-09-09 19:11:10,781 - root - INFO - _find_htf_setup_async:899 - [SAP] New HTF setup added to watchlist. Direction: sell.
2025-09-09 19:11:10,782 - root - INFO - add_notification:33 - Notification: Setup Found - SAP sell setup added to watchlist
2025-09-09 19:11:15,285 - root - INFO - _find_htf_setup_async:879 - [SHOP] NEW POI | Type=Bearish | Score=23 | Range=(145.07, 148.59) | SL=156.88
2025-09-09 19:11:15,287 - root - INFO - _find_htf_setup_async:899 - [SHOP] New HTF setup added to watchlist. Direction: sell.
2025-09-09 19:11:15,287 - root - INFO - add_notification:33 - Notification: Setup Found - SHOP sell setup added to watchlist
2025-09-09 19:11:22,538 - root - INFO - _find_htf_setup_async:879 - [TSLA] NEW POI | Type=Bullish | Score=25 | Range=(338.27, 341.71) | SL=314.16
2025-09-09 19:11:22,539 - root - INFO - _find_htf_setup_async:899 - [TSLA] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:11:22,539 - root - INFO - add_notification:33 - Notification: Setup Found - TSLA buy setup added to watchlist
2025-09-09 19:11:30,935 - root - INFO - _find_htf_setup_async:879 - [TXN] NEW POI | Type=Bearish | Score=25 | Range=(185.18, 187.63) | SL=197.65
2025-09-09 19:11:30,936 - root - INFO - _find_htf_setup_async:899 - [TXN] New HTF setup added to watchlist. Direction: sell.
2025-09-09 19:11:30,936 - root - INFO - add_notification:33 - Notification: Setup Found - TXN sell setup added to watchlist
2025-09-09 19:11:33,791 - root - INFO - _find_htf_setup_async:879 - [SONO] NEW POI | Type=Bullish | Score=25 | Range=(14.65, 14.73) | SL=13.92
2025-09-09 19:11:33,793 - root - INFO - _find_htf_setup_async:899 - [SONO] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:11:33,793 - root - INFO - add_notification:33 - Notification: Setup Found - SONO buy setup added to watchlist
2025-09-09 19:12:45,328 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $40.32 | PDT: 0/4
2025-09-09 19:13:04,814 - root - INFO - _find_htf_setup_async:879 - [LASR] NEW POI | Type=Bullish | Score=23 | Range=(27.05, 27.59) | SL=24.79
2025-09-09 19:13:04,815 - root - INFO - _find_htf_setup_async:899 - [LASR] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:13:04,815 - root - INFO - add_notification:33 - Notification: Setup Found - LASR buy setup added to watchlist
2025-09-09 19:13:05,555 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 19:13:09,086 - root - INFO - _find_htf_setup_async:879 - [CRDO] NEW POI | Type=Bullish | Score=23 | Range=(142.33, 147.41) | SL=126.80
2025-09-09 19:13:09,087 - root - INFO - _find_htf_setup_async:899 - [CRDO] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:13:09,088 - root - INFO - add_notification:33 - Notification: Setup Found - CRDO buy setup added to watchlist
2025-09-09 19:14:13,635 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $57.60 | PDT: 0/4
2025-09-09 19:14:20,243 - root - INFO - _find_htf_setup_async:879 - [SITM] NEW POI | Type=Bullish | Score=23 | Range=(237.49, 238.61) | SL=217.19
2025-09-09 19:14:20,245 - root - INFO - _find_htf_setup_async:899 - [SITM] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:14:20,245 - root - INFO - add_notification:33 - Notification: Setup Found - SITM buy setup added to watchlist
2025-09-09 19:14:30,547 - root - INFO - _find_htf_setup_async:879 - [OPEN] NEW POI | Type=Bullish | Score=23 | Range=(5.39, 5.90) | SL=3.61
2025-09-09 19:14:30,548 - root - INFO - _find_htf_setup_async:899 - [OPEN] New HTF setup added to watchlist. Direction: buy.
2025-09-09 19:14:30,548 - root - INFO - add_notification:33 - Notification: Setup Found - OPEN buy setup added to watchlist
2025-09-09 19:15:56,034 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $104.66 | PDT: 0/4
2025-09-09 19:17:45,901 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $87.84 | PDT: 0/4
2025-09-09 19:19:30,692 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $70.56 | PDT: 0/4
2025-09-09 19:21:15,879 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $52.56 | PDT: 0/4
2025-09-09 19:22:47,782 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $44.64 | PDT: 0/4
2025-09-09 19:22:54,986 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 19:24:21,349 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-10.08 | PDT: 0/4
2025-09-09 19:26:08,283 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $18.72 | PDT: 0/4
2025-09-09 19:27:55,800 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $24.48 | PDT: 0/4
2025-09-09 19:29:41,309 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $51.84 | PDT: 0/4
2025-09-09 19:31:44,791 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $34.56 | PDT: 0/4
2025-09-09 19:31:59,682 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 19:33:11,084 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $22.81 | PDT: 0/4
2025-09-09 19:34:29,023 - root - ERROR - execute_db_query:48 - Database query failed: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 19:34:29,023 - root - ERROR - _get_market_data_from_db:127 - Error getting data from database: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 19:34:32,520 - root - INFO - _fetch_live_data:184 - Fetched 21 data points for AAPL at 1d timeframe
2025-09-09 19:34:57,945 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-21.60 | PDT: 0/4
2025-09-09 19:36:46,226 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-21.47 | PDT: 0/4
2025-09-09 19:37:16,334 - root - INFO - _check_ltf_confirmation_enhanced:963 - [NOW] Pullback complete, awaiting MSS
2025-09-09 19:38:30,241 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-23.04 | PDT: 0/4
2025-09-09 19:39:06,978 - root - INFO - _check_ltf_confirmation_enhanced:963 - [TXN] Pullback complete, awaiting MSS
2025-09-09 19:40:14,219 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-17.28 | PDT: 0/4
2025-09-09 19:40:42,258 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 19:41:43,416 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-55.44 | PDT: 0/4
2025-09-09 19:43:22,529 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-70.56 | PDT: 0/4
2025-09-09 19:45:12,079 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-63.68 | PDT: 0/4
2025-09-09 19:47:02,053 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-23.76 | PDT: 0/4
2025-09-09 19:48:47,849 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-37.44 | PDT: 0/4
2025-09-09 19:50:23,233 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-27.36 | PDT: 0/4
2025-09-09 19:50:36,293 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 19:51:55,346 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-15.84 | PDT: 0/4
2025-09-09 19:53:39,940 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $64.80 | PDT: 0/4
2025-09-09 19:55:26,659 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $83.52 | PDT: 0/4
2025-09-09 19:57:14,568 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $97.82 | PDT: 0/4
2025-09-09 19:58:56,614 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $67.67 | PDT: 0/4
2025-09-09 19:59:17,345 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 20:00:25,220 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $38.88 | PDT: 0/4
2025-09-09 20:02:09,999 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $25.21 | PDT: 0/4
2025-09-09 20:03:57,574 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-17.28 | PDT: 0/4
2025-09-09 20:05:42,979 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-33.12 | PDT: 0/4
2025-09-09 20:07:29,350 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-54.79 | PDT: 0/4
2025-09-09 20:09:01,727 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-54.72 | PDT: 0/4
2025-09-09 20:09:08,705 - root - WARNING - _find_htf_setup_async:812 - Insufficient HTF data for ALMU setup analysis
2025-09-09 20:10:36,214 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-56.16 | PDT: 0/4
2025-09-09 20:12:21,013 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-89.28 | PDT: 0/4
2025-09-09 20:14:06,875 - root - INFO - _update_status:74 - Analyzing 10/54 symbols... Daily P&L: $-38.16 | PDT: 0/4
2025-09-09 20:15:43,854 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:15:43,854 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:15:43,854 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:15:43,854 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:15:43,887 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:15:43,887 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:15:44,129 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:15:44,130 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:15:44,185 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:15:44,185 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:15:44,185 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:15:44,185 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:15:44,720 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 20:16:28,636 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:16:28,636 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:16:28,637 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:16:28,637 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:16:28,667 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:16:28,668 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:16:28,904 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:16:28,905 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:16:28,958 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:16:28,958 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:16:28,958 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:16:28,959 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:16:29,434 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 20:16:40,181 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:16:40,181 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:16:40,181 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:16:40,182 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:16:40,214 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:16:40,215 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:16:40,451 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:16:40,452 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:16:40,505 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:16:40,505 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:16:40,505 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:16:40,506 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:16:40,998 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 20:17:57,452 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:17:57,453 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:17:57,453 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:17:57,453 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:17:57,485 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:17:57,486 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:17:57,726 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:17:57,727 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:17:57,783 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:17:57,783 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:17:57,783 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:17:57,783 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:17:58,305 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 20:18:56,443 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:18:56,443 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:18:56,443 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:18:56,443 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:18:56,474 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:18:56,475 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:18:56,708 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 1
2025-09-09 20:18:56,708 - dotenv.main - WARNING - with_warn_for_invalid_lines:27 - python-dotenv could not parse statement starting at line 7
2025-09-09 20:18:56,764 - root - INFO - setup_logging:78 - Logging configured. Log files will be written to: E:\workspace\fast_api_trading_platform\logs
2025-09-09 20:18:56,764 - root - INFO - setup_logging:79 - Main log: logs\trading_agent.log
2025-09-09 20:18:56,765 - root - INFO - setup_logging:80 - Error log: logs\trading_errors.log
2025-09-09 20:18:56,765 - root - INFO - setup_logging:81 - Daily log: logs\daily_20250909.log
2025-09-09 20:18:57,256 - root - INFO - get_db_connection_pool:12 - Connecting to PostgreSQL database... {'dbname': 'paper_trading', 'user': 'postgres', 'host': 'localhost', 'port': '5432'}
2025-09-09 20:19:03,226 - root - INFO - get_broker:9 - Selected data provider: alpaca
2025-09-09 20:19:03,226 - root - INFO - get_broker:12 - Using Alpaca as the data and trading provider.
2025-09-09 20:19:03,227 - root - INFO - __init__:68 - AlpacaBroker initialized. Paper trading: True
2025-09-09 20:19:03,227 - agent.live_orders_manager - INFO - __init__:85 - LiveOrdersManager initialized with trailing stop support
2025-09-09 20:19:03,227 - root - INFO - __init__:60 - PDT Management: Enabled (Limit: 4 trades/day)
2025-09-09 20:19:03,228 - root - INFO - run_async:119 - Trading Agent's async loop started.
2025-09-09 20:19:03,229 - root - INFO - start_monitoring:95 - Live orders monitoring started.
2025-09-09 20:19:04,116 - root - INFO - validate_connection:381 - Account access OK. Equity: $97,933.30
2025-09-09 20:19:04,347 - root - INFO - validate_connection:386 - Trading access OK. Current positions: 1
2025-09-09 20:19:05,280 - root - INFO - validate_connection:402 - Data access OK. Retrieved 3 bars for AAPL
2025-09-09 20:19:05,740 - root - INFO - _update_status:69 - Services connected. Account Equity: $97,940.50 | Market: CLOSED
2025-09-09 20:19:05,741 - root - INFO - _connect_services:100 - Broker validation: Account=True, Trading=True, Data=True, Market Open=False
2025-09-09 20:19:05,743 - root - INFO - _load_agent_state:393 - Loaded agent state: 22 watchlist items, PDT: 0/4
2025-09-09 20:19:06,207 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $15.12 | PDT: 0/4
2025-09-09 20:20:52,757 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-72.00 | PDT: 0/4
2025-09-09 20:21:02,205 - root - INFO - _find_htf_setup_async:876 - [AVGO] NEW POI | Type=Bullish | Score=20 | Range=(304.81, 316.98) | SL=278.60
2025-09-09 20:21:02,206 - root - INFO - _save_agent_state:334 - Saving agent state - {'watchlist': {'ACN': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [254.4, 256.09], 'timestamp': '2025-09-09 14:56:59.548768+00:00', 'htf_stop_loss': 266.49785714285713, 'max_duration_seconds': 2592000.0}, 'ADI': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [240.6, 244.305], 'timestamp': '2025-09-09 14:57:03.045397+00:00', 'htf_stop_loss': 228.9892857142857, 'max_duration_seconds': 2592000.0}, 'NOW': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [909.62, 932.585], 'timestamp': '2025-09-09 15:09:40.078218+00:00', 'htf_stop_loss': 862.0085714285715, 'max_duration_seconds': 2592000.0}, 'SAP': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [271.41, 273.69], 'timestamp': '2025-09-09 15:11:10.781090+00:00', 'htf_stop_loss': 281.36, 'max_duration_seconds': 2592000.0}, 'TXN': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [185.175, 187.63], 'timestamp': '2025-09-09 15:11:30.935255+00:00', 'htf_stop_loss': 197.64714285714285, 'max_duration_seconds': 2592000.0}, 'AAPL': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [232.48, 234.76], 'timestamp': '2025-09-09 14:56:52.354489+00:00', 'htf_stop_loss': 224.74499999999998, 'max_duration_seconds': 2592000.0}, 'AMZN': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [238.14, 239.57], 'timestamp': '2025-09-09 14:57:17.792854+00:00', 'htf_stop_loss': 248.78142857142856, 'max_duration_seconds': 2592000.0}, 'ANET': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [137.1, 138.19], 'timestamp': '2025-09-09 14:57:22.042762+00:00', 'htf_stop_loss': 129.34357142857144, 'max_duration_seconds': 2592000.0}, 'ASML': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [804.89, 808.01], 'timestamp': '2025-09-09 14:57:28.163251+00:00', 'htf_stop_loss': 841.1071428571428, 'max_duration_seconds': 2592000.0}, 'CRDO': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [142.33, 147.405], 'timestamp': '2025-09-09 15:13:09.087020+00:00', 'htf_stop_loss': 126.80428571428573, 'max_duration_seconds': 2592000.0}, 'GOOG': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [232.77, 233.99], 'timestamp': '2025-09-09 14:58:52.405718+00:00', 'htf_stop_loss': 221.19285714285715, 'max_duration_seconds': 2592000.0}, 'INTU': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [672.195, 675.995], 'timestamp': '2025-09-09 14:59:10.632106+00:00', 'htf_stop_loss': 701.2178571428572, 'max_duration_seconds': 2592000.0}, 'LASR': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [27.05, 27.585], 'timestamp': '2025-09-09 15:13:04.814370+00:00', 'htf_stop_loss': 24.785714285714285, 'max_duration_seconds': 2592000.0}, 'NVDA': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [172.5, 173.83], 'timestamp': '2025-09-09 15:09:45.130385+00:00', 'htf_stop_loss': 184.08357142857142, 'max_duration_seconds': 2592000.0}, 'OPEN': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [5.39, 5.9], 'timestamp': '2025-09-09 15:14:30.547288+00:00', 'htf_stop_loss': 3.605714285714286, 'max_duration_seconds': 2592000.0}, 'ORCL': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [242.21, 245.0], 'timestamp': '2025-09-09 15:09:49.448173+00:00', 'htf_stop_loss': 258.40214285714285, 'max_duration_seconds': 2592000.0}, 'PLTR': {'type': 'Bearish', 'score': 18, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [172.29, 173.405], 'timestamp': '2025-09-09 15:09:58.186332+00:00', 'htf_stop_loss': 187.69285714285715, 'max_duration_seconds': 2592000.0}, 'SHOP': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [145.07, 148.585], 'timestamp': '2025-09-09 15:11:15.286205+00:00', 'htf_stop_loss': 156.88071428571428, 'max_duration_seconds': 2592000.0}, 'SITM': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [237.49, 238.61], 'timestamp': '2025-09-09 15:14:20.244125+00:00', 'htf_stop_loss': 217.18857142857144, 'max_duration_seconds': 2592000.0}, 'SONO': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [14.65, 14.73], 'timestamp': '2025-09-09 15:11:33.792094+00:00', 'htf_stop_loss': 13.918571428571429, 'max_duration_seconds': 2592000.0}, 'TSLA': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [338.275, 341.71], 'timestamp': '2025-09-09 15:11:22.538817+00:00', 'htf_stop_loss': 314.15714285714284, 'max_duration_seconds': 2592000.0}, 'GOOGL': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [232.36, 233.67], 'timestamp': '2025-09-09 14:58:57.351727+00:00', 'htf_stop_loss': 220.64142857142858, 'max_duration_seconds': 2592000.0}, 'AVGO': {'direction': 'buy', 'poi_range': (np.float64(304.805), np.float64(316.975)), 'htf_stop_loss': np.float64(278.595), 'timestamp': datetime.datetime(2025, 9, 9, 16, 21, 2, 206098, tzinfo=datetime.timezone.utc), 'max_duration_seconds': 2592000.0, 'state': 'awaiting_pullback', 'score': 20, 'type': 'Bullish'}}, 'daily_equity_start': 97925.38, 'daily_trades_executed': 0, 'current_trading_day': '2025-09-09', 'last_saved': '2025-09-09T16:21:02.206109+00:00'}
2025-09-09 20:21:02,208 - root - INFO - _find_htf_setup_async:896 - [AVGO] New HTF setup added to watchlist. Direction: buy.
2025-09-09 20:21:02,208 - root - INFO - add_notification:33 - Notification: Setup Found - AVGO buy setup added to watchlist
2025-09-09 20:22:39,833 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-113.04 | PDT: 0/4
2025-09-09 20:23:04,370 - root - INFO - _check_ltf_confirmation_enhanced:960 - [NOW] Pullback complete, awaiting MSS
2025-09-09 20:24:28,176 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-101.52 | PDT: 0/4
2025-09-09 20:26:09,565 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-112.00 | PDT: 0/4
2025-09-09 20:26:21,081 - root - INFO - _find_htf_setup_async:876 - [DFDV] NEW POI | Type=Bearish | Score=25 | Range=(17.75, 18.10) | SL=21.80
2025-09-09 20:26:21,082 - root - INFO - _save_agent_state:334 - Saving agent state - {'watchlist': {'ACN': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [254.4, 256.09], 'timestamp': '2025-09-09 14:56:59.548768+00:00', 'htf_stop_loss': 266.49785714285713, 'max_duration_seconds': 2592000.0}, 'ADI': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [240.6, 244.305], 'timestamp': '2025-09-09 14:57:03.045397+00:00', 'htf_stop_loss': 228.9892857142857, 'max_duration_seconds': 2592000.0}, 'NOW': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_mss', 'direction': 'buy', 'poi_range': [909.62, 932.585], 'timestamp': '2025-09-09 15:09:40.078218+00:00', 'htf_stop_loss': 862.0085714285715, 'max_duration_seconds': 2592000.0}, 'SAP': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [271.41, 273.69], 'timestamp': '2025-09-09 15:11:10.781090+00:00', 'htf_stop_loss': 281.36, 'max_duration_seconds': 2592000.0}, 'TXN': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [185.175, 187.63], 'timestamp': '2025-09-09 15:11:30.935255+00:00', 'htf_stop_loss': 197.64714285714285, 'max_duration_seconds': 2592000.0}, 'AAPL': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [232.48, 234.76], 'timestamp': '2025-09-09 14:56:52.354489+00:00', 'htf_stop_loss': 224.74499999999998, 'max_duration_seconds': 2592000.0}, 'AMZN': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [238.14, 239.57], 'timestamp': '2025-09-09 14:57:17.792854+00:00', 'htf_stop_loss': 248.78142857142856, 'max_duration_seconds': 2592000.0}, 'ANET': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [137.1, 138.19], 'timestamp': '2025-09-09 14:57:22.042762+00:00', 'htf_stop_loss': 129.34357142857144, 'max_duration_seconds': 2592000.0}, 'ASML': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [804.89, 808.01], 'timestamp': '2025-09-09 14:57:28.163251+00:00', 'htf_stop_loss': 841.1071428571428, 'max_duration_seconds': 2592000.0}, 'CRDO': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [142.33, 147.405], 'timestamp': '2025-09-09 15:13:09.087020+00:00', 'htf_stop_loss': 126.80428571428573, 'max_duration_seconds': 2592000.0}, 'GOOG': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [232.77, 233.99], 'timestamp': '2025-09-09 14:58:52.405718+00:00', 'htf_stop_loss': 221.19285714285715, 'max_duration_seconds': 2592000.0}, 'INTU': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [672.195, 675.995], 'timestamp': '2025-09-09 14:59:10.632106+00:00', 'htf_stop_loss': 701.2178571428572, 'max_duration_seconds': 2592000.0}, 'LASR': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [27.05, 27.585], 'timestamp': '2025-09-09 15:13:04.814370+00:00', 'htf_stop_loss': 24.785714285714285, 'max_duration_seconds': 2592000.0}, 'NVDA': {'type': 'Bearish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [172.5, 173.83], 'timestamp': '2025-09-09 15:09:45.130385+00:00', 'htf_stop_loss': 184.08357142857142, 'max_duration_seconds': 2592000.0}, 'OPEN': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [5.39, 5.9], 'timestamp': '2025-09-09 15:14:30.547288+00:00', 'htf_stop_loss': 3.605714285714286, 'max_duration_seconds': 2592000.0}, 'ORCL': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [242.21, 245.0], 'timestamp': '2025-09-09 15:09:49.448173+00:00', 'htf_stop_loss': 258.40214285714285, 'max_duration_seconds': 2592000.0}, 'PLTR': {'type': 'Bearish', 'score': 18, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [172.29, 173.405], 'timestamp': '2025-09-09 15:09:58.186332+00:00', 'htf_stop_loss': 187.69285714285715, 'max_duration_seconds': 2592000.0}, 'SHOP': {'type': 'Bearish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'sell', 'poi_range': [145.07, 148.585], 'timestamp': '2025-09-09 15:11:15.286205+00:00', 'htf_stop_loss': 156.88071428571428, 'max_duration_seconds': 2592000.0}, 'SITM': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [237.49, 238.61], 'timestamp': '2025-09-09 15:14:20.244125+00:00', 'htf_stop_loss': 217.18857142857144, 'max_duration_seconds': 2592000.0}, 'SONO': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [14.65, 14.73], 'timestamp': '2025-09-09 15:11:33.792094+00:00', 'htf_stop_loss': 13.918571428571429, 'max_duration_seconds': 2592000.0}, 'TSLA': {'type': 'Bullish', 'score': 25, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [338.275, 341.71], 'timestamp': '2025-09-09 15:11:22.538817+00:00', 'htf_stop_loss': 314.15714285714284, 'max_duration_seconds': 2592000.0}, 'GOOGL': {'type': 'Bullish', 'score': 23, 'state': 'awaiting_pullback', 'direction': 'buy', 'poi_range': [232.36, 233.67], 'timestamp': '2025-09-09 14:58:57.351727+00:00', 'htf_stop_loss': 220.64142857142858, 'max_duration_seconds': 2592000.0}, 'AVGO': {'direction': 'buy', 'poi_range': (np.float64(304.805), np.float64(316.975)), 'htf_stop_loss': np.float64(278.595), 'timestamp': datetime.datetime(2025, 9, 9, 16, 21, 2, 206098, tzinfo=datetime.timezone.utc), 'max_duration_seconds': 2592000.0, 'state': 'awaiting_pullback', 'score': 20, 'type': 'Bullish'}, 'DFDV': {'direction': 'sell', 'poi_range': (np.float64(17.75), np.float64(18.1)), 'htf_stop_loss': np.float64(21.800714285714292), 'timestamp': datetime.datetime(2025, 9, 9, 16, 26, 21, 82148, tzinfo=datetime.timezone.utc), 'max_duration_seconds': 2592000.0, 'state': 'awaiting_pullback', 'score': 25, 'type': 'Bearish'}}, 'daily_equity_start': 97925.38, 'daily_trades_executed': 0, 'current_trading_day': '2025-09-09', 'last_saved': '2025-09-09T16:26:21.082161+00:00'}
2025-09-09 20:26:21,083 - root - INFO - _find_htf_setup_async:896 - [DFDV] New HTF setup added to watchlist. Direction: sell.
2025-09-09 20:26:21,083 - root - INFO - add_notification:33 - Notification: Setup Found - DFDV sell setup added to watchlist
2025-09-09 20:26:29,397 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 20:27:37,134 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-126.00 | PDT: 0/4
2025-09-09 20:29:17,836 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-105.12 | PDT: 0/4
2025-09-09 20:31:05,308 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-102.24 | PDT: 0/4
2025-09-09 20:32:50,360 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-118.80 | PDT: 0/4
2025-09-09 20:34:35,975 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-107.29 | PDT: 0/4
2025-09-09 20:36:08,426 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-106.56 | PDT: 0/4
2025-09-09 20:36:15,915 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 20:37:43,036 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-111.60 | PDT: 0/4
2025-09-09 20:39:29,065 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-115.20 | PDT: 0/4
2025-09-09 20:41:16,117 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-112.32 | PDT: 0/4
2025-09-09 20:43:02,802 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-116.64 | PDT: 0/4
2025-09-09 20:44:44,575 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-102.24 | PDT: 0/4
2025-09-09 20:44:59,162 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 20:46:10,534 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-102.96 | PDT: 0/4
2025-09-09 20:47:57,243 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-120.96 | PDT: 0/4
2025-09-09 20:49:43,626 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-125.28 | PDT: 0/4
2025-09-09 20:51:32,086 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-110.88 | PDT: 0/4
2025-09-09 20:51:48,634 - root - INFO - _check_ltf_confirmation_enhanced:960 - [SAP] Pullback complete, awaiting MSS
2025-09-09 20:53:16,336 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-144.00 | PDT: 0/4
2025-09-09 20:53:43,570 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 20:54:44,728 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-136.80 | PDT: 0/4
2025-09-09 20:56:24,380 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-106.56 | PDT: 0/4
2025-09-09 20:58:12,863 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-43.20 | PDT: 0/4
2025-09-09 20:59:59,744 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-70.56 | PDT: 0/4
2025-09-09 21:02:01,111 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-38.16 | PDT: 0/4
2025-09-09 21:03:36,366 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-20.88 | PDT: 0/4
2025-09-09 21:03:48,394 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:05:07,600 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-11.52 | PDT: 0/4
2025-09-09 21:06:53,386 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $14.40 | PDT: 0/4
2025-09-09 21:08:44,948 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $7.92 | PDT: 0/4
2025-09-09 21:10:34,084 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $11.52 | PDT: 0/4
2025-09-09 21:12:16,811 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-1.44 | PDT: 0/4
2025-09-09 21:12:36,920 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:13:45,106 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $13.68 | PDT: 0/4
2025-09-09 21:15:27,482 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $0.72 | PDT: 0/4
2025-09-09 21:17:21,616 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-16.56 | PDT: 0/4
2025-09-09 21:19:07,838 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-56.16 | PDT: 0/4
2025-09-09 21:20:54,534 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-61.92 | PDT: 0/4
2025-09-09 21:22:28,827 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-51.12 | PDT: 0/4
2025-09-09 21:22:35,972 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:24:03,548 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-2.82 | PDT: 0/4
2025-09-09 21:25:48,216 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-12.24 | PDT: 0/4
2025-09-09 21:27:40,613 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-20.16 | PDT: 0/4
2025-09-09 21:29:26,289 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-27.36 | PDT: 0/4
2025-09-09 21:31:07,394 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-17.28 | PDT: 0/4
2025-09-09 21:31:22,641 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:32:35,066 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-15.84 | PDT: 0/4
2025-09-09 21:34:22,627 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-51.84 | PDT: 0/4
2025-09-09 21:34:33,999 - root - INFO - _check_ltf_confirmation_enhanced:960 - [ASML] Pullback complete, awaiting MSS
2025-09-09 21:36:09,977 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-65.52 | PDT: 0/4
2025-09-09 21:37:56,379 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-54.72 | PDT: 0/4
2025-09-09 21:39:40,769 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-67.68 | PDT: 0/4
2025-09-09 21:40:08,758 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:41:09,918 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-56.16 | PDT: 0/4
2025-09-09 21:42:48,793 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-47.52 | PDT: 0/4
2025-09-09 21:44:38,018 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-54.72 | PDT: 0/4
2025-09-09 21:46:30,559 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-70.56 | PDT: 0/4
2025-09-09 21:48:16,975 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-59.76 | PDT: 0/4
2025-09-09 21:48:30,226 - root - INFO - _check_ltf_confirmation_enhanced:960 - [TXN] Pullback complete, awaiting MSS
2025-09-09 21:49:52,243 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-84.96 | PDT: 0/4
2025-09-09 21:50:05,537 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:51:28,938 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-95.04 | PDT: 0/4
2025-09-09 21:53:15,681 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-89.28 | PDT: 0/4
2025-09-09 21:55:02,992 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-83.16 | PDT: 0/4
2025-09-09 21:56:50,418 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-97.20 | PDT: 0/4
2025-09-09 21:58:31,571 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-77.04 | PDT: 0/4
2025-09-09 21:58:51,843 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 21:59:59,425 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-59.04 | PDT: 0/4
2025-09-09 22:00:05,328 - root - INFO - __init__:23 - LLM Market Analyzer initialized with Gemini.
2025-09-09 22:00:05,332 - root - INFO - __init__:23 - LLM Market Analyzer initialized with Gemini.
2025-09-09 22:01:50,690 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-74.88 | PDT: 0/4
2025-09-09 22:03:41,376 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-77.76 | PDT: 0/4
2025-09-09 22:05:28,236 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-47.52 | PDT: 0/4
2025-09-09 22:07:15,695 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-24.48 | PDT: 0/4
2025-09-09 22:08:49,186 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $3.60 | PDT: 0/4
2025-09-09 22:08:56,552 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 22:10:24,248 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $5.63 | PDT: 0/4
2025-09-09 22:12:09,347 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-15.12 | PDT: 0/4
2025-09-09 22:13:55,540 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-64.80 | PDT: 0/4
2025-09-09 22:15:42,105 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-50.40 | PDT: 0/4
2025-09-09 22:17:26,142 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-61.92 | PDT: 0/4
2025-09-09 22:17:40,477 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 22:18:51,610 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-72.00 | PDT: 0/4
2025-09-09 22:19:09,499 - root - INFO - _check_ltf_confirmation_enhanced:960 - [AAPL] Pullback complete, awaiting MSS
2025-09-09 22:19:34,092 - root - INFO - _check_ltf_confirmation_enhanced:960 - [AMZN] Pullback complete, awaiting MSS
2025-09-09 22:20:39,613 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-69.84 | PDT: 0/4
2025-09-09 22:22:26,177 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-64.80 | PDT: 0/4
2025-09-09 22:23:29,701 - root - ERROR - execute_db_query:48 - Database query failed: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:23:29,701 - root - ERROR - _get_market_data_from_db:127 - Error getting data from database: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:23:41,678 - root - INFO - _fetch_live_data:184 - Fetched 21 data points for AAPL at 1d timeframe
2025-09-09 22:23:43,159 - root - ERROR - execute_db_query:48 - Database query failed: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:23:43,159 - root - ERROR - _get_market_data_from_db:127 - Error getting data from database: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:23:43,701 - root - INFO - _fetch_live_data:184 - Fetched 21 data points for AAPL at 1d timeframe
2025-09-09 22:23:46,035 - root - ERROR - execute_db_query:48 - Database query failed: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:23:46,035 - root - ERROR - _get_market_data_from_db:127 - Error getting data from database: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:23:46,568 - root - INFO - _fetch_live_data:184 - Fetched 21 data points for AAPL at 1d timeframe
2025-09-09 22:24:11,581 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-96.48 | PDT: 0/4
2025-09-09 22:25:55,778 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-97.92 | PDT: 0/4
2025-09-09 22:26:24,278 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 22:27:25,441 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-92.16 | PDT: 0/4
2025-09-09 22:29:05,455 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-95.04 | PDT: 0/4
2025-09-09 22:30:53,820 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-110.88 | PDT: 0/4
2025-09-09 22:32:42,232 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-115.21 | PDT: 0/4
2025-09-09 22:34:28,600 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-101.52 | PDT: 0/4
2025-09-09 22:36:04,697 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-100.08 | PDT: 0/4
2025-09-09 22:36:17,665 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 22:37:37,143 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-110.88 | PDT: 0/4
2025-09-09 22:39:28,045 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-110.16 | PDT: 0/4
2025-09-09 22:41:16,479 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-113.76 | PDT: 0/4
2025-09-09 22:43:05,344 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-118.80 | PDT: 0/4
2025-09-09 22:44:47,906 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-124.14 | PDT: 0/4
2025-09-09 22:45:08,660 - root - WARNING - _find_htf_setup_async:809 - Insufficient HTF data for ALMU setup analysis
2025-09-09 22:46:21,450 - root - ERROR - execute_db_query:48 - Database query failed: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:46:21,450 - root - ERROR - _get_market_data_from_db:127 - Error getting data from database: relation "market_data" does not exist
LINE 3:             FROM market_data 
                         ^

2025-09-09 22:46:23,876 - root - INFO - _fetch_live_data:184 - Fetched 21 data points for AAPL at 1d timeframe
2025-09-09 22:46:24,368 - root - INFO - _update_status:69 - Analyzing 10/54 symbols... Daily P&L: $-142.56 | PDT: 0/4
